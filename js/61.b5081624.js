"use strict";(self["webpackChunkshopping_project"]=self["webpackChunkshopping_project"]||[]).push([[61],{61:function(t,s,e){e.r(s),e.d(s,{default:function(){return p}});e(4114);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{fixed:"",title:"商品列表","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:t.search||"搜索商品","show-action":""},on:{click:function(s){return t.$router.push("/search")}},scopedSlots:t._u([{key:"action",fn:function(){return[s("van-icon",{staticClass:"tool",attrs:{name:"apps-o"}})]},proxy:!0}])}),s("van-tabs",{on:{click:t.filter}},[s("van-tab",{attrs:{name:"zonghe",title:"综合"}}),s("van-tab",{attrs:{name:"Sales",title:"销量"}}),s("van-tab",{attrs:{name:"price",title:"价格"},scopedSlots:t._u([{key:"title",fn:function(){return[s("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.sortPrice,expression:"sortPrice"}],attrs:{name:"arrow-down"}}),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.sortPrice,expression:"!sortPrice"}],attrs:{name:"arrow-up"}}),t._v(" 价格 ")]},proxy:!0}])})],1),s("div",{staticClass:"goods-list"},[t._l(t.proList,(function(t){return s("GoodsItem",{key:t.goods_id,attrs:{item:t}})})),t.isNone?s("van-empty",{attrs:{image:"search",description:"暂未搜到"}}):t._e()],2)],1)},r=[],o=e(3322),i=e(7867),n={name:"SearchIndex",components:{GoodsItem:o.A},data(){return{search:"",proList:[],isNone:!1,page:1,sortPrice:0,active:0,categoryId:""}},async created(){this.categoryId=this.$route.query.categoryId,this.search=this.$route.query.search;const t={categoryId:this.categoryId,goodsName:this.search,page:this.page,sortPrice:this.sortPrice},s=await(0,i.Cd)(t);this.proList=s.data.list.data,0===s.data.list.total&&(this.isNone=!0)},methods:{async filter(t,s){if("price"===t){this.sortPrice=1===this.sortPrice?0:1;const t={goodsName:this.search,page:this.page,sortPrice:this.sortPrice,sortType:"price"},s=await(0,i.Cd)(t);this.proList=s.data.list.data}if("Sales"===t){const t={goodsName:this.search,page:this.page,sortPrice:this.sortPrice,sortType:"sales"},s=await(0,i.Cd)(t);this.proList=s.data.list.data}if("zonghe"===t){const t={goodsName:this.search,page:this.page,sortPrice:this.sortPrice,sortType:"all"},s=await(0,i.Cd)(t);this.proList=s.data.list.data}}}},c=n,d=e(1656),h=(0,d.A)(c,a,r,!1,null,"76135cf1",null),p=h.exports},7867:function(t,s,e){e.d(s,{B7:function(){return o},Cd:function(){return r},Yv:function(){return i}});var a=e(5720);const r=t=>{const{categoryId:s,goodsName:e,page:r,sortPrice:o,sortType:i}=t;return a.A.get("/goods/list",{params:{categoryId:s,goodsName:e,page:r,sortPrice:o,sortType:i}})},o=t=>a.A.get("/goods/detail",{params:{goodsId:t}}),i=(t,s)=>a.A.get("/comment/listRows",{params:{goodsId:t,limit:s}})}}]);
//# sourceMappingURL=61.b5081624.js.map