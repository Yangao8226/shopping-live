{"version":3,"file":"js/61.b5081624.js","mappings":"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","sources":["webpack://shopping-project/./src/views/search/list.vue","webpack://shopping-project/src/views/search/list.vue","webpack://shopping-project/./src/views/search/list.vue?2a3a","webpack://shopping-project/./src/views/search/list.vue?8e03","webpack://shopping-project/./src/api/product.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"商品列表\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('van-search',{attrs:{\"readonly\":\"\",\"shape\":\"round\",\"background\":\"#ffffff\",\"value\":_vm.search || '搜索商品',\"show-action\":\"\"},on:{\"click\":function($event){return _vm.$router.push('/search')}},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('van-icon',{staticClass:\"tool\",attrs:{\"name\":\"apps-o\"}})]},proxy:true}])}),_c('van-tabs',{on:{\"click\":_vm.filter}},[_c('van-tab',{attrs:{\"name\":\"zonghe\",\"title\":\"综合\"}}),_c('van-tab',{attrs:{\"name\":\"Sales\",\"title\":\"销量\"}}),_c('van-tab',{attrs:{\"name\":\"price\",\"title\":\"价格\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sortPrice),expression:\"sortPrice\"}],attrs:{\"name\":\"arrow-down\"}}),_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sortPrice),expression:\"!sortPrice\"}],attrs:{\"name\":\"arrow-up\"}}),_vm._v(\" 价格 \")]},proxy:true}])})],1),_c('div',{staticClass:\"goods-list\"},[_vm._l((_vm.proList),function(item){return _c('GoodsItem',{key:item.goods_id,attrs:{\"item\":item}})}),(_vm.isNone)?_c('van-empty',{attrs:{\"image\":\"search\",\"description\":\"暂未搜到\"}}):_vm._e()],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search\">\r\n    <van-nav-bar fixed title=\"商品列表\" left-arrow @click-left=\"$router.go(-1)\" />\r\n\r\n    <van-search\r\n      readonly\r\n      shape=\"round\"\r\n      background=\"#ffffff\"\r\n      :value=\"search || '搜索商品'\"\r\n      show-action\r\n      @click=\"$router.push('/search')\"\r\n    >\r\n      <template #action>\r\n        <van-icon class=\"tool\" name=\"apps-o\" />\r\n      </template>\r\n    </van-search>\r\n\r\n    <!-- 排序选项按钮 -->\r\n    <van-tabs @click=\"filter\">\r\n  <van-tab name=\"zonghe\" title=\"综合\"></van-tab>\r\n  <van-tab name=\"Sales\" title=\"销量\"></van-tab>\r\n  <van-tab  name=\"price\" title=\"价格\" >\r\n  <template #title>\r\n    <van-icon name=\"arrow-down\"  v-show=\"sortPrice\"/><van-icon name=\"arrow-up\" v-show=\"!sortPrice\" />\r\n    价格\r\n  </template>\r\n</van-tab>\r\n\r\n  </van-tabs>\r\n\r\n    <div class=\"goods-list\">\r\n      <!-- 渲染搜到的值 -->\r\n      <GoodsItem v-for=\"item in proList\" :key=\"item.goods_id\" :item=\"item\"></GoodsItem>\r\n      <van-empty  v-if=\"isNone\"  image=\"search\" description=\"暂未搜到\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GoodsItem from '@/components/GoodsItem.vue'\r\nimport { getProList } from '@/api/product'\r\nexport default {\r\n  name: 'SearchIndex',\r\n  components: {\r\n    GoodsItem\r\n  },\r\n  data () {\r\n    return {\r\n      search: '',\r\n      proList: [], // 搜索到的商品列表\r\n      isNone: false, // 搜不到商品则为true,默认为false\r\n      page: 1,\r\n      sortPrice: 0, // 0-价格从低到高， 1-价格从高到低\r\n      active: 0, // 标签页高亮下标\r\n      categoryId: ''// 分类商品的分类id\r\n    }\r\n  },\r\n  async created () {\r\n    // 点击分类页的分类商品的分类id\r\n    this.categoryId = this.$route.query.categoryId\r\n    // 搜索框的搜索内容保留并回显\r\n    this.search = this.$route.query.search\r\n    // 将搜索词传给api并接收api传过来的值\r\n    const obj = { categoryId: this.categoryId, goodsName: this.search, page: this.page, sortPrice: this.sortPrice }\r\n    const res = await getProList(obj)\r\n    // console.log(res)\r\n    this.proList = res.data.list.data\r\n    // console.log(this.proList)\r\n    // 如果搜不到则让isNone为真,则v-if(暂未搜到的图案)生效\r\n    if (res.data.list.total === 0) {\r\n      this.isNone = true\r\n    }\r\n    // console.log(this.categoryId)\r\n  },\r\n  methods: {\r\n    async filter (name, title) {\r\n      if (name === 'price') {\r\n        this.sortPrice = this.sortPrice === 1 ? 0 : 1\r\n        const obj = { goodsName: this.search, page: this.page, sortPrice: this.sortPrice, sortType: 'price' }\r\n        const res = await getProList(obj)\r\n        this.proList = res.data.list.data\r\n      }\r\n      if (name === 'Sales') {\r\n        const obj = { goodsName: this.search, page: this.page, sortPrice: this.sortPrice, sortType: 'sales' }\r\n        const res = await getProList(obj)\r\n        this.proList = res.data.list.data\r\n      }\r\n      if (name === 'zonghe') {\r\n        const obj = { goodsName: this.search, page: this.page, sortPrice: this.sortPrice, sortType: 'all' }\r\n        const res = await getProList(obj)\r\n        this.proList = res.data.list.data\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search {\r\n  padding-top: 46px;\r\n  ::v-deep .van-icon-arrow-left {\r\n    color: #333;\r\n  }\r\n  .tool {\r\n    font-size: 24px;\r\n    height: 40px;\r\n    line-height: 40px;\r\n  }\r\n\r\n  .sort-btns {\r\n    display: flex;\r\n    height: 36px;\r\n    line-height: 36px;\r\n    .sort-item {\r\n      text-align: center;\r\n      flex: 1;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n\r\n// 商品样式\r\n.goods-list {\r\n  background-color: #f6f6f6;\r\n}\r\n.van-empty{\r\n  height: 550px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=76135cf1&scoped=true\"\nimport script from \"./list.vue?vue&type=script&lang=js\"\nexport * from \"./list.vue?vue&type=script&lang=js\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=76135cf1&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76135cf1\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n// 获取搜索商品列表的数据\r\nexport const getProList = (obj) => {\r\n  const { categoryId, goodsName, page, sortPrice, sortType } = obj\r\n  return request.get('/goods/list', {\r\n    params: {\r\n      categoryId, // 组件中没传这个,因为接口屏蔽undefined和null的值,以goodsName为基准\r\n      goodsName,\r\n      page,\r\n      sortPrice,\r\n      sortType\r\n    }\r\n  })\r\n}\r\n\r\n// 获取单个商品详情的数据\r\nexport const getProDetail = (goodsId) => {\r\n  return request.get('/goods/detail', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n\r\n// 获取商品的评价 //goodsId商品id,limit获取评论的数量\r\nexport const getProComments = (goodsId, limit) => {\r\n  return request.get('/comment/listRows', {\r\n    params: {\r\n      goodsId,\r\n      limit\r\n    }\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","search","push","scopedSlots","_u","key","fn","proxy","filter","directives","name","rawName","value","sortPrice","expression","_v","_l","proList","item","goods_id","isNone","_e","staticRenderFns","components","GoodsItem","data","page","active","categoryId","created","$route","query","obj","goodsName","res","getProList","list","total","methods","title","sortType","component","request","get","params","getProDetail","goodsId","getProComments","limit"],"sourceRoot":""}